<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBQ Orders App</title>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
    </style>

    <!-- Tailwind CSS Script -->
    <!-- Placed in head for early styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Ensure tailwind.config is defined immediately after tailwind script
        tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                inter: ['Inter', 'sans-serif'],
              },
              keyframes: {
                pingOnce: {
                  '0%, 100%': { opacity: '0' },
                  '50%': { opacity: '1' },
                }
              },
              animation: {
                'ping-once': 'pingOnce 1s cubic-bezier(0, 0, 0.2, 1) forwards',
              }
            },
          },
        };
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- Load React and ReactDOM from unpkg.com (UMD versions for global access) -->
    <!-- These MUST load and execute before your bundle.js -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Load Firebase SDKs from CDN (compat versions for global access) -->
    <!-- These MUST load and execute before your bundle.js -->
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>

    <script>
        // Global variables for Firebase config
        // These MUST be defined before bundle.js runs as App.js expects them
        window.__app_id = "bbqorders-763b2"; // projectId from firebaseConfig
        window.__firebase_config = JSON.stringify({
            apiKey: "AIzaSyAyxUhAi7wlxjNV_UqPf4zGCKe3VGCeT-M",
            authDomain: "bbqorders-763b2.firebaseapp.com",
            projectId: "bbqorders-763b2",
            storageBucket: "bbqorders-763b2.firebasestorage.app",
            messagingSenderId: "525014584357",
            appId: "1:525014584357:web:475cc586634367b86b03cc"
        });
        window.__initial_auth_token = null;

        // Explicitly ensure React and ReactDOM are globally available for the bundled app
        // This is a redundant but defensive step to combat stubborn loading issues.
        if (typeof React === 'undefined' && typeof window.React !== 'undefined') {
            window.React = window.React;
        }
        if (typeof ReactDOM === 'undefined' && typeof window.ReactDOM !== 'undefined') {
            window.ReactDOM = window.ReactDOM;
        }
    </script>

    <!-- Your compiled JavaScript bundle -->
    <!-- This script loads the output of your build.js (bundle.js) -->
    <!-- It must be placed AFTER all its dependencies (React, ReactDOM, Firebase) -->
    <script src="./bundle.js"></script>

    <script>
        // Ensure the app renders only after the DOM is fully loaded and all scripts are available
        document.addEventListener('DOMContentLoaded', function() {
            const rootElement = document.getElementById('root');
            if (rootElement && typeof ReactDOM !== 'undefined' && typeof React !== 'undefined' && typeof App !== 'undefined') {
                const root = ReactDOM.createRoot(rootElement);
                root.render(React.createElement(App));
                console.log("App rendered successfully.");
            } else {
                console.error("Failed to render App. Debug info:", {
                    rootElement: rootElement,
                    ReactDOMDefined: typeof ReactDOM !== 'undefined',
                    ReactDefined: typeof React !== 'undefined',
                    AppDefined: typeof App !== 'undefined'
                });
            }
        });
    </script>
</body>
</html>
